// *********************************************************************************************************************
// ***                                        CONFIDENTIAL --- CUSTOM STUDIOS                                        ***
// *********************************************************************************************************************
// * Auth: ColeCai                                                                                                     *
// * Date: 2023/10/28 01:38:01                                                                                         *
// * Proj: gotils                                                                                                      *
// * Pack: tools                                                                                                       *
// * File: tools.go                                                                                                    *
// *-------------------------------------------------------------------------------------------------------------------*
// * Overviews:                                                                                                        *
// *-------------------------------------------------------------------------------------------------------------------*
// * Functions:                                                                                                        *
// * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *

package tools

import (
	"crypto/rand"
	"encoding/binary"
	"golang.org/x/exp/constraints"
	"unsafe"
)

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/28 01:38:15 ColeCai.                                                                          *
// *********************************************************************************************************************
func RandNBytes(n int) []byte {
	result := make([]byte, n)
	rand.Read(result)
	return result
}

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/30 12:38:59 ColeCai.                                                                          *
// *********************************************************************************************************************
func StringToBytes(s string) []byte {
	return unsafe.Slice(unsafe.StringData(s), len(s))
}

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/30 12:39:04 ColeCai.                                                                          *
// *********************************************************************************************************************
func BytesToString(b []byte) string {
	return unsafe.String(&b[0], len(b))
}

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/30 15:56:12 ColeCai.                                                                          *
// *********************************************************************************************************************
func IntegersToBytes[T constraints.Integer](src []T) []byte {
	v := unsafe.Slice(unsafe.SliceData(src), len(src)*4)
	return *(*[]byte)(unsafe.Pointer(&v))
}

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/30 15:59:35 ColeCai.                                                                          *
// *********************************************************************************************************************
func BytesToIntegers[T constraints.Integer](src []byte) []T {
	v := unsafe.Slice(unsafe.SliceData(src), len(src)/4)
	return *(*[]T)(unsafe.Pointer(&v))
}

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/30 23:26:37 ColeCai.                                                                          *
// *********************************************************************************************************************
func Uint16ToBytes(in uint16) []byte {
	bytes := make([]byte, 2)
	binary.BigEndian.PutUint16(bytes, in)
	return bytes
}

// *********************************************************************************************************************
// * SUMMARY: none.                                                                                                    *
// * WARNING: none.                                                                                                    *
// * HISTORY:                                                                                                          *
// *    -create: 2023/10/30 23:48:23 ColeCai.                                                                          *
// *********************************************************************************************************************
func ReverseSlice[T any](slice []T) []T {
	for i, j := 0, len(slice)-1; i < j; i, j = i+1, j-1 {
		slice[i], slice[j] = slice[j], slice[i]
	}
	return slice
}
